<!DOCTYPE html>
<div data-bb-type="screen" data-bb-effect="slide-left">
	<div data-bb-type="round-panel">
		<div data-bb-type="panel-header">Settings</div>

		<select id="dateFormat" data-bb-label="Date Format" onChange="storeSelect('dateFormat')">
			<option value="DD/MM/YYYY HH:mm">26/10/2013 21:00</option>
			<option value="MM/DD/YYYY HH:mm">10/26/2013 21:00</option>
			<option value="YYYY/MM/DD HH:mm">2013/10/26 21:00</option>
		</select>

		<select id="order" data-bb-label="Order by" onChange="storeSelect('order')">
			<option value="Name">Alphabetic</option>
			<option value="Date">Date</option>
		</select>

		<select id="precision" data-bb-label="Time precision" onChange="storeSelect('precision')">
			<option value="D">Days</option>
			<option value="H">Hours</option>
			<option value="M">Minutes</option>
		</select>
	</div>
	<div data-bb-type="action-bar" data-bb-back-caption="Back" onclick="document.getElementById('myScreen').refresh();"></div>
</div>

<script type="text/javascript">
	function storeSelect(id){
		var x = document.getElementById(id);
		localStorage.setItem(id, x.value);
	}


	function updateSelect(id, value){
		var elements = document.getElementById(id).options;
		for(var i=0; i<elements.length; i++){
			if(document.getElementById(id).options[i].value == value){
				document.getElementById(id).options[i].selected = true;
			}
	 	}
	 	document.getElementById(id).refresh();
	}

	function loadSettings(){
		updateSelect("precision", localStorage.getItem('precision'));
		updateSelect("dateFormat", localStorage.getItem('dateFormat'));
		updateSelect("order", localStorage.getItem('order'));
	}
</script>